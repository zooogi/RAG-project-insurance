# RAGä¿é™©é¡¹ç›®

åŸºäºæ£€ç´¢å¢å¼ºç”Ÿæˆ(RAG)çš„ä¿é™©æ–‡æ¡£æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚

 
## ğŸ“ é¡¹ç›®ç»“æ„

```
RAG-ä¿é™©é¡¹ç›®/
â”œâ”€â”€ app/                    # åº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ ocr.py             # PDFå¤„ç†æ¨¡å—
â”‚   â”œâ”€â”€ embedder.py        # æ–‡æœ¬å‘é‡åŒ–æ¨¡å—
â”‚   â”œâ”€â”€ chunker.py         # æ–‡æœ¬åˆ†å—æ¨¡å—
â”‚   â”œâ”€â”€ reranker.py        # æ£€ç´¢å’Œé‡æ’åºæ¨¡å—
â”‚   â”œâ”€â”€ config.py          # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ main.py            # ä¸»ç¨‹åº
|
â”œâ”€â”€ data/                   # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ pdf/               # åŸå§‹PDFæ–‡ä»¶
â”‚   â”œâ”€â”€ processed/         # å¤„ç†åçš„æ–‡ä»¶
â”‚   â””â”€â”€ chunks/            # åˆ†å—åçš„JSONæ–‡ä»¶
|
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â”‚   â”œâ”€â”€ OCR_USAGE.md       # OCRæ¨¡å—ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ CHUNKER_USAGE.md   # Chunkeræ¨¡å—ä½¿ç”¨æŒ‡å—
â”‚   â””â”€â”€ EMBEDDER_USAGE.md  # Embedderä½¿ç”¨æŒ‡å—
â”œâ”€â”€ scripts/                # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ test_ocr.py        # OCRæµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ test_embed.py      # Embedderæµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ test_chunker.py    # Chunkeræµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ test_reranker.py   # Rerankeræµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ download_embed.py  # ä¸‹è½½å‘é‡æ¨¡å‹
â”œâ”€â”€ requirements.txt        # Pythonä¾èµ–
â””â”€â”€ README.md              # æœ¬æ–‡ä»¶
```

## âœ¨ ä¸»è¦åŠŸèƒ½

### 1. PDFæ–‡æ¡£å¤„ç† (OCRæ¨¡å—)
- æ”¯æŒæ–‡å­—ç‰ˆå’Œæ‰«æç‰ˆPDF
- è‡ªåŠ¨æå–æ–‡æœ¬ã€è¡¨æ ¼å’Œå›¾ç‰‡
- åŒå¼•æ“æ”¯æŒï¼šMineRUï¼ˆé«˜çº§ï¼‰+ PyMuPDFï¼ˆå¤‡é€‰ï¼‰
- è¾“å‡ºMarkdownå’Œçº¯æ–‡æœ¬æ ¼å¼

### 2. æ–‡æœ¬åˆ†å— (Chunkeræ¨¡å—)
- åŸºäºè¯­ä¹‰çš„æ™ºèƒ½åˆ†å—
- ä¿ç•™æ–‡æ¡£ç»“æ„ä¸Šä¸‹æ–‡ï¼ˆæ ‡é¢˜å±‚çº§ï¼‰
- è¡¨æ ¼ä½œä¸ºä¸å¯æ‹†åˆ†çš„åŸå­å•å…ƒ
- è¯†åˆ«å¹¶è®°å½•å›¾ç‰‡å¼•ç”¨
- ç»Ÿä¸€çš„ç»“æ„åŒ–è¾“å‡ºæ ¼å¼

### 3. æ–‡æœ¬å‘é‡åŒ– (Embedderæ¨¡å—)
- ä½¿ç”¨bge-large-zh-v1.5ä¸­æ–‡å‘é‡æ¨¡å‹
- æ”¯æŒæ–‡æ¡£å’ŒæŸ¥è¯¢çš„å‘é‡åŒ–
- é«˜æ•ˆçš„è¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—

### 4. æ£€ç´¢å’Œé‡æ’åº (Rerankeræ¨¡å—)
- **Rankingé˜¶æ®µ**ï¼šä½¿ç”¨Faissè¿›è¡Œé«˜æ•ˆçš„å‘é‡æ£€ç´¢
- **Rerankingé˜¶æ®µ**ï¼šä½¿ç”¨bge-reranker-largeè¿›è¡Œç²¾ç»†é‡æ’åº
- æ”¯æŒmetadataåŠ æƒï¼ˆåˆ©ç”¨ç« èŠ‚è·¯å¾„ã€chunkç±»å‹ç­‰ä¿¡æ¯ï¼‰
- ä¸¤é˜¶æ®µæ£€ç´¢æµç¨‹ï¼Œå…¼é¡¾æ•ˆç‡å’Œå‡†ç¡®æ€§

### 5. LLMç”Ÿæˆ

### 6. APIæ¥å£


## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd RAG-ä¿é™©é¡¹ç›®

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
conda create -n rag python=3.10
conda activate rag

# 3. å®‰è£…ä¾èµ–åŒ…
pip install -r requirements.txt

# ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿï¼ˆå¯é€‰ï¼‰
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### é¦–æ¬¡ä½¿ç”¨é…ç½®

#### ä½¿ç”¨MineRUï¼ˆæ¨èï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ï¼‰

```bash
# å®‰è£…MineRUå’Œä¾èµ–
# ä¸‹è½½ä¾èµ–åŒ…å·²ç»åŒ…å«äº†å®‰è£…MineRU
pip install -r requirements.txt
#pip install mineru>=2.7.0 accelerate>=0.20.0

#check æœ‰å†…å®¹å°±æ˜¯ä¸‹è½½æˆåŠŸ
mineru --help

# test é¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨ä¸‹è½½æ¨¡å‹ï¼ˆçº¦1-2GBï¼Œéœ€è¦æ—¶é—´ï¼‰
mineru -p data/pdf/ä¿é™©åŸºç¡€çŸ¥å¤šå°‘.pdf -o data/mineru_test --source modelscope
```

#### ä½¿ç”¨Embeddingå’ŒReranker

```bash
# æµ‹è¯•Embedderæ¨¡å—
python scripts/test_embed.py

# æµ‹è¯•Rerankeræ¨¡å—ï¼ˆé¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨ä¸‹è½½æ¨¡å‹ï¼‰
python scripts/test_reranker.py
```

**æ³¨æ„**ï¼š
- Rerankerä½¿ç”¨`BAAI/bge-reranker-large`æ¨¡å‹ï¼Œé¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨ä¸‹è½½ï¼ˆçº¦1-2GBï¼‰
- å¦‚æœä½¿ç”¨GPUï¼Œå»ºè®®å®‰è£…`faiss-gpu`ä»¥æå‡æ£€ç´¢é€Ÿåº¦
- æ¨¡å‹ä¼šè‡ªåŠ¨ç¼“å­˜åˆ°`~/.cache/huggingface/hub/`ç›®å½•
